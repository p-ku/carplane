[gd_scene load_steps=11 format=2]

[ext_resource path="res://postprocess/MotionBlur/vel1pass.shader" type="Shader" id=1]
[ext_resource path="res://postprocess/screenMesh.tres" type="ArrayMesh" id=2]
[ext_resource path="res://postprocess/MotionBlur/vel3final.shader" type="Shader" id=3]
[ext_resource path="res://postprocess/MotionBlur/macguire.shader" type="Shader" id=4]
[ext_resource path="res://postprocess/MotionBlur/MotionBlur.cs" type="Script" id=5]
[ext_resource path="res://postprocess/MotionBlur/vel2tiled.shader" type="Shader" id=6]

[sub_resource type="ShaderMaterial" id=122]
shader = ExtResource( 4 )
shader_param/reso = null
shader_param/inv_reso = null
shader_param/dim_check = null
shader_param/short_dim = null
shader_param/long_dim = null
shader_param/tile_size = null
shader_param/tile_uv = null
shader_param/steps = null
shader_param/j_prime_term = null
shader_param/gamma = 1.5
shader_param/kk = null
shader_param/f1 = null
shader_param/f2 = null
shader_param/f3 = null
shader_param/f4 = null

[sub_resource type="ShaderMaterial" id=120]
shader = ExtResource( 3 )
shader_param/dims = null
shader_param/inv_reso = null
shader_param/tile_uv = null

[sub_resource type="ShaderMaterial" id=121]
shader = ExtResource( 6 )
shader_param/reso = null
shader_param/inv_reso = null
shader_param/tile_uv = null

[sub_resource type="ShaderMaterial" id=74]
shader = ExtResource( 1 )
shader_param/cam_prev_pos = null
shader_param/cam_prev_xform = null
shader_param/snap = false
shader_param/res_depth_vec = null
shader_param/uv_depth_vec = null
shader_param/tile_uv = null
shader_param/half_reso = null
shader_param/inv_reso = null
shader_param/tile_size = 40.0
shader_param/shutter_angle = 0.5

[node name="MotionBlur" type="ColorRect"]
material = SubResource( 122 )
anchor_right = 1.0
anchor_bottom = 1.0
script = ExtResource( 5 )

[node name="NeighborBuffer" type="Viewport" parent="."]
size = Vector2( 64, 36 )
handle_input_locally = false
hdr = false
disable_3d = true
keep_3d_linear = true
usage = 1
debug_draw = 1
render_target_update_mode = 3
gui_disable_input = true

[node name="NeighborVelocity" type="ColorRect" parent="NeighborBuffer"]
material = SubResource( 120 )
anchor_right = 1.0
anchor_bottom = 1.0

[node name="TiledBuffer" type="Viewport" parent="."]
size = Vector2( 64, 36 )
handle_input_locally = false
hdr = false
disable_3d = true
keep_3d_linear = true
usage = 1
debug_draw = 1
render_target_update_mode = 3
gui_disable_input = true

[node name="TiledVelocity" type="ColorRect" parent="TiledBuffer"]
material = SubResource( 121 )
anchor_right = 1.0
anchor_bottom = 1.0

[node name="VelocityBuffer" type="Viewport" parent="."]
size = Vector2( 1280, 720 )
handle_input_locally = false
keep_3d_linear = true
debug_draw = 1
render_target_update_mode = 3
gui_disable_input = true

[node name="VelocityCam" type="Camera" parent="VelocityBuffer"]
visible = false

[node name="VelocityMesh" type="MeshInstance" parent="VelocityBuffer/VelocityCam"]
transform = Transform( -1, 6.58818e-08, -1.35865e-07, 0, 0.899794, 0.436315, 1.50996e-07, 0.436315, -0.899794, 0, 30, -5 )
layers = 524288
extra_cull_margin = 16384.0
generate_lightmap = false
mesh = ExtResource( 2 )
skeleton = NodePath("../..")
material/0 = SubResource( 74 )
__meta__ = {
"apply_volumetrics": false
}

[node name="ColorBuffer" type="Viewport" parent="."]
size = Vector2( 1280, 720 )
handle_input_locally = false
usage = 3
render_target_update_mode = 3
gui_disable_input = true

[node name="ColorCam" type="Camera" parent="ColorBuffer"]
cull_mask = 524287
